== REQUIRES ==

sudo apt-get install bioperl mummer

== README ==

http://www.plantagora.org/tools_downloads/assembly_evaluation.html

assess_assembly.pl

Download assess_assembly.pl [http://www.plantagora.org/tools_downloads/files/assess_assembly.php]

Compare an assembly against its known reference or a similar reference.

Assembly Evaluation

assess_assembly.pl is a tool that will allow you to compare an assembly against its known reference or a similar reference. It will assess the territory covered by the assembly along with the number and size of gaps, amount of indels and snps, and the presence of misassembiles. Additionally you can specify to look for these attributes only in certain regions of the genome using an annotations file in gff format. First the tool will align the genome to the reference using nucmer. Then snps and indels will be identified using show-snps. If a gff file is specified, this file will be parsed for the regions of interest. Once this is complete the program will then parse the alignments for each contig and determine the best hit, or hits. After the best hits for each contig have been found the tool will step through the reference and record coverage, gap, and snp information.

The final assemblies that are produced by the Plantagora Project are evaluated according to the metrics given in the Metrics section. The metrics are divided into 2 main categories. The first category consists of information recorded about the the assembly process itself and statistics about the resulting assemblies. The information recorded during the assembly process includes the processor time required, the kmer setting, and the memory required. The statistics about the assemblies include information about the size and number of contigs, and size and number of scaffolds.

An important part of the evaluation of the assemblies requires comparing them to their source genome to determine various types of errors. Error can come in the form of wrong bases entered into portions of the sequence, but also can include sequences that are mistakenly inserted in the correct sequence or deletions of portions of the correct sequence. On a larger scale, misassemblies consist of whole reads or larger sections of the genome that are misplaced within the final scaffold, resulting in large discontinuities.

== METRICS ==

http://www.plantagora.org/Plantagora_Engine/assembly_evaluation.html

Assembly Statistics

A specific set of metrics were chosen to assess and compare the assemblies that were produced. They fall into 3 major categories: performance metrics, assembly metrics, and genome representation metrics.

Performance metrics indicate the resources required for the assembly to run. The performance metrics specified in this project were number of processors used, the total runtime (walltime) of the assembly, the total cpu time used by the assembly, the maximum memory used by the assembler, and the final amount of disk space used after assembly computation was complete.

Assembly metrics provide insight into the quality of the assembly. The following metrics were gathered as part of this project: total number of contigs, contig N50, total contig length, average contig length, largest contig length, contigs > 1kb, contigs > 5kb, number of scaffolds, total scaffold length, average scaffold length, largest scaffold length, and scaffold N50.

Genome representation statistics were assessed by comparing the final assembly to the finished reference genome from which the reads were simulated. Various regions of the genome could be interigated based on the annotations along the reference sequence. For this project we looked at the full reference genome, repeat regions, gene regions, and various gene families. The first set of metrics that can be obtained by comparing to the reference have to do with base errors and ambiguities:

    Ambiguous bases These are defined as the number of bases in the assembly consensus sequence that are specified as N's instead of a nucleotide base.

    Error rate This is defined as the percent of errors in the assembly obtained by dividing the total number of base errors (indel and mismatch) by the total number of bases in the specified reference or reference region.

    Indel rate This is defined as the percent of indels in the assembly obtained by dividing the total number of indels by the total number of bases in the specified reference or reference region.

    Mismatch rate This is defined as the percent of mismatches in the assembly obtained by dividing the total number of mismatches by the total number of bases in the specified reference or reference region.

The second set of metrics has to do with misassemblies found in the assembled contigs. Misassemblies are defined as a location on an assembled contig where the left flanking sequence aligns over 1kb away from the right flanking sequence on the reference. Internal gaps and overlaps are a form of minor misassembly where a small (<1kb) insertion or deletion event has occured.

    Misassembly rate This is defined as the average number of misassemblies found per Mb of sequence.

    Misassembled contigs This is the number of contigs which contain misassembly events.

    Misassembled contig bases This is the number of total bases contained in all contigs which have one or more misassemblies.

    Internal overlaps This is the number of instances of internal overlaps found in all assembled contigs.

    Internal gaps This is the number of instances of internal gapss found in all assembled contigs.

A third set of metrics was defined to obtain representation information. This assess how much of the reference genome is capture by the assembled contigs.

    Representation The percent of the reference genome which is covered by assembled contigs.

    Number of gaps This is the total number of gaps present between assembled contigs which align to the reference. This could be higher than the total number of contigs if misassemblies force a contig to be aligned in more than one location.

    Average gap size This is the average size of gaps as specified above.

    Total gap bases This is the total amount of bases in gaps as specified above.

    Number of negative gaps This is the total number of times that two contigs overlap each other on the reference genome.

    Average negative gap size This is the average size of the negative gaps as specified above.

Lastly, because these metrics are based on alignment to the reference, there are instances where contigs are not aligned, or ambiguously aligned. These metrics indicate those events.

    Unaligned contigs Contigs that had no alignment to the reference sequence.

    Unaligned contig bases This is the total number of bases contained in unaligned contigs.

    Ambigous contigs These are contigs which had reference alignments of equal quality in multiple locations on the reference. Since unambiguous placement could not be obtained these contigs were not included in coverage analysis.

    Ambiguous contig bases This is the total number of bases contained in ambiguous contigs.

To obtain these representation metrics, a tool was developed to align and parse out these statisticis.
